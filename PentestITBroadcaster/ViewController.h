//
//  ViewController.h
//  PentestITBroadcaster
//
//  Created by Vladimir Korennoy on 05.04.15.
//  Copyright (c) 2015 PENTESTIT. All rights reserved.
//

#import <Cocoa/Cocoa.h>

@interface ViewController : NSViewController

//@property (weak) IBOutlet NSScrollView *logArea;
@property (weak) IBOutlet NSScrollView *textArea;
@property (weak) IBOutlet NSProgressIndicator *statusSpinner;
@property (weak) IBOutlet NSButton *stopBtn;
@property (weak) IBOutlet NSButton *startBtn;
@property (weak) IBOutlet NSTextField *scrSize;
@property (weak) IBOutlet NSTextField *fpsNumver;

@property (weak) IBOutlet NSPopUpButton *audioDevicesList;
@property (weak) IBOutlet NSPopUpButton *videoDevicesList;
@property (weak) IBOutlet NSTextField *statusText;
@property (weak) IBOutlet NSButton *audioEnabledChk;
@property (weak) IBOutlet NSTextField *fpsRate;
@property (weak) IBOutlet NSStepper *fpsRateStepper;
@property (weak) IBOutlet NSTextField *audioBitrate;
@property (weak) IBOutlet NSTextField *audioCodec;
@property (weak) IBOutlet NSTextField *ffmpegBinPath;
@property (weak) IBOutlet NSTextField *fmsUrl;
@property (weak) IBOutlet NSTextField *streamKey;
@property (weak) IBOutlet NSTextField *screenSize;
@property (weak) IBOutlet NSTextField *videoBitrate;
@property (weak) IBOutlet NSTextField *videoCodec;

@property (weak) NSTimer *timer;

@property (nonatomic) NSString *ffmpegPath;

-(void) deviceList;
-(void)readPipeToTheEnd:(NSTimer *)timer;
-(void) startReadingPipe;
-(NSString *) parseDeviceIndex: (NSString *)text;
-(void) logString: (NSString *)text;
@end

